<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Central Landscaping - Content Manager</title>
    <!-- Include the script that enables Netlify Identity on this page. -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    
    <!-- Custom styles to improve editor experience -->
    <style>
      /* Fix for cursor jumping issue in Chrome */
      div[data-slate-editor] {
        -webkit-user-modify: read-write !important;
      }
      
      /* Improve the overall appearance of the editor */
      .css-1c38erj-TextControl, 
      .css-1ekf6y8-ToolbarContainer {
        background-color: white !important;
        border: 1px solid #ddd !important;
        border-radius: 5px !important;
        padding: 10px !important;
      }
      
      /* Make the editor look more like a word processor */
      .css-1f12zf4-WidgetPreviewContainer {
        border: 1px solid #ddd !important;
        border-radius: 5px !important;
        padding: 20px !important;
        background-color: white !important;
      }
      
      /* Improve the appearance of the admin interface */
      .css-1vh1eco-HeaderContainer, 
      .css-1hvrgvd-CollectionTopContainer-card-cardTop {
        background-color: #4a8553 !important;
      }
      
      .css-12b66la-AppHeaderContent {
        background-color: #f5f5f5 !important;
      }
      
      /* Add instruction message for the client */
      .nc-entryEditor-markdown::before {
        content: "✏️ Use the editor toolbar above to format your text. You can add headings, bold text, links, lists, and more.";
        display: block;
        padding: 10px;
        margin-bottom: 15px;
        background-color: #f8f9fa;
        border-left: 4px solid #4a8553;
        color: #333;
        font-size: 14px;
      }
      
      /* Add proper styling for blog content */
      .blog-preview h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        color: #333;
        font-weight: 700;
      }
      
      .blog-preview p {
        margin-bottom: 1.5rem;
        line-height: 1.7;
      }
      
      .blog-preview img {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        margin-bottom: 1.5rem;
      }
      
      /* Add classes to style the editor toolbar */
      .RichTextEditor-toolbar {
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 8px;
        background-color: #f5f5f5;
      }
      
      .RichTextEditor-toolbar button {
        margin-right: 5px;
        padding: 5px 10px;
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 3px;
        cursor: pointer;
      }
      
      .RichTextEditor-toolbar button:hover {
        background-color: #f0f0f0;
      }
      
      /* Add helpful tooltips to editor buttons */
      .RichTextEditor-toolbar button[title]:hover:after {
        content: attr(title);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        padding: 5px 10px;
        background-color: #333;
        color: white;
        border-radius: 3px;
        font-size: 12px;
        white-space: nowrap;
      }
    </style>
  </head>
  <body>
    <!-- Include the script that builds the page and powers Netlify CMS -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    
    <!-- Dependencies for preview -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/date-fns@2.28.0/index.js"></script>
    
    <!-- Include preview templates -->
    <script src="./preview-templates/index.js"></script>
    
    <!-- Custom script to improve editor experience -->
    <script>
      // Wait for CMS to initialize
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
      
      // Add custom preview styles when CMS is loaded
      window.addEventListener('load', function() {
        // Wait for CMS to be fully loaded
        setTimeout(function() {
          // Set a more reasonable height for the editor
          const editorContainer = document.querySelector('.css-yilgkd-PreviewPaneContainer');
          if (editorContainer) {
            editorContainer.style.minHeight = '500px';
          }
          
          // Add custom message to help guide the client
          const toolbar = document.querySelector('.css-1ekf6y8-ToolbarContainer');
          if (toolbar) {
            const helpText = document.createElement('div');
            helpText.style.padding = '8px';
            helpText.style.fontSize = '14px';
            helpText.style.color = '#666';
            helpText.innerHTML = 'Click on toolbar buttons above to format your text';
            toolbar.parentNode.insertBefore(helpText, toolbar.nextSibling);
          }
          
          // Add a helpful message for blog editing
          const editorHeader = document.querySelector('.css-1f7kkg-ControlContainer');
          if (editorHeader && window.location.href.includes('/admin/#/collections/blog/')) {
            const helpHeader = document.createElement('div');
            helpHeader.style.padding = '15px';
            helpHeader.style.margin = '0 0 20px 0';
            helpHeader.style.backgroundColor = '#f0f7f1';
            helpHeader.style.borderRadius = '5px';
            helpHeader.style.color = '#333';
            helpHeader.style.fontSize = '16px';
            helpHeader.style.lineHeight = '1.5';
            helpHeader.innerHTML = `
              <h3 style="margin-top: 0; color: #4a8553; font-weight: bold;">How to Use This Blog Editor</h3>
              <p>This is a user-friendly editor for creating blog posts. Here's how to use it:</p>
              <ul style="padding-left: 20px; margin-top: 10px;">
                <li>Use the <strong>toolbar buttons</strong> to format your text (bold, italic, headings, links, etc.)</li>
                <li>Click <strong>Save</strong> to save your draft</li>
                <li>Click <strong>Publish</strong> when you're ready to publish your post</li>
                <li>Use the <strong>Preview</strong> tab to see how your post will look on the website</li>
              </ul>
            `;
            
            if (editorHeader.parentNode) {
              editorHeader.parentNode.insertBefore(helpHeader, editorHeader);
            }
          }
        }, 1000);
      });
    </script>
  </body>
</html> 